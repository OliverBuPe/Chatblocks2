{
  "mensajesIntroduccion": {
    "type": "listMessages",
    "requerimientos": {
      "01inicial": {
        "nombreVariable": {
          "type": "string",
          "responsible": "DEV",
          "recommended": "var_case",
          "constraints": false,
          "name": "variable de control",
          "description": "nombre que recibe la variable de contador",
          "value": "contador_mensajesIntroduccion"
        },
        "messages": {
          "type": "listDisplay",
          "responsible": "UX",
          "recommended": {
            "content": "hola prueba",
            "type": "text"
          },
          "constraints": false,
          "name": "lista de que se pueden desplegar",
          "description": "mensajes que se depliegan al usuario",
          "value": [
            {
              "content": "¡Hola! Soy Niza.",
              "type": "text"
            },
            {
              "content": "Un asistente virtual para atención ciudadana puedo responder dudas sobre tu agua potable",
              "type": "text"
            },
            {
              "content": "Te gustaría saber cómo utilizarme",
              "type": "text"
            }
          ]
        },
        "defaultMessage": {
          "type": "dictDisplay",
          "responsible": "UX",
          "recommended": {
            "content": "no te entiendo",
            "type": "text"
          },
          "constraints": false,
          "name": "mensaje por defecto",
          "description": "mensaje que se depliega al usuario si ocurre un error en la funcionalidad",
          "value": {
            "content": "No te entiendo",
            "type": "text"
          }
        }
      }
    },
    "outputs": {
      "01inicial": {
        "next": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "siguiente bloque",
          "value": "menuIntroduccion"
        },
        "default": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "salida default",
          "value": "menuIntroduccion"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "case",
          "description": "Funciona como un contador que permite limitar el número de intentos al realizar algun proceso",
          "compile": [
            "jsonVariable",
            "url"
          ],
          "parameters": {
            "jsonVariable": "{'variable':{ 'name_var':'{{nombreVariable}}','opc_type': 'Variable','var':0,'opc_data': 'Numerico'}}",
            "method": "GET",
            "typing_messages": 3,
            "url": "http://127.0.0.1:1111/increase/{{nombreVariable}}/",
            "messages": "@messages",
            "default_message": "@defaultMessage",
            "nombreVariable": "@nombreVariable"
          },
          "outputs": {
            "default_id": "@default",
            "last": "restarVariable",
            "salidasCase": "inicial"
          }
        },
        "restarVariable": {
          "type": "internalProcess",
          "description": "bloque para realizar proceso interno del sistema",
          "compile": [
            "url"
          ],
          "parameters": {
            "method": "GET",
            "url": "http://127.0.0.1:1111/restar/{{nombreVariable}}",
            "nombreVariable": "@nombreVariable"
          },
          "outputs": {
            "next_true": "@next",
            "next_false": "@next"
          }
        }
      }
    }
  },
  "menuIntroduccion": {
    "type": "userValidation",
    "requerimientos": {
      "01inicial": {
        "content": {
          "type": "string",
          "responsible": "UX",
          "recommended": false,
          "contador": false,
          "name": "mensaje quickReply",
          "description": "mensaje que se le muesta al usuario en el quickReply",
          "value": "Toca uno de los botones azules para saber tu elección"
        },
        "buttonTrue": {
          "type": "jonButton",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "validacion positiva",
          "description": "boton positivo",
          "value": {
            "title": "¡ok veamos!",
            "next_block": "mensajesIntroduccion2"
          }
        },
        "buttonFalse": {
          "type": "jonButton",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "validacion negativa",
          "description": "boton negativo",
          "value": {
            "title": "Prefiero ir al menú",
            "next_block": "mensajePreMenu"
          }
        },
        "time": {
          "type": "select",
          "responsible": "UX",
          "recommended": 2,
          "constraints": [
            {
              "key": "uno",
              "value": 1
            },
            {
              "key": "dos",
              "value": 2
            },
            {
              "key": "tres",
              "value": 3
            }
          ],
          "name": "Tiempo de espera",
          "description": "tiempo de espera para mostrar el menú",
          "value": 5
        },
        "nombreVariable": {
          "type": "string",
          "responsible": "DEV",
          "recommended": "var_case",
          "constraints": false,
          "name": "variable de control",
          "description": "nombre que recibe la variable de contador",
          "value": "qr_menuIntro"
        }
      }
    },
    "outputs": {
      "01inicial": {
        "default": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "salida default de contador",
          "value": "mensajePreMenu"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "@typeVisual",
          "description": "Funciona como un contador que permite limitar el número de intentos al realizar algun proceso",
          "compile": [
            "jsonVariable",
            "json"
          ],
          "parameters": {
            "handlebars": "@jsonMenu",
            "jsonVariable": "{'variable':{ 'name_var':'{{nombreVariable}}','opc_type': 'Variable','var':0,'opc_data': 'Numerico'}}",
            "typingtime": "@time",
            "nombreVariable": "@nombreVariable",
            "json": "{'content':'{{content}}','buttons':[{'title':'{{buttonTrue.title}}','next_block':'{{buttonTrue.next_block}}'},{'title':'{{buttonFalse.title}}','next_block':'{{buttonFalse.next_block}}'}]}",
            "content": "@content",
            "buttonTrue": "@buttonTrue",
            "buttonFalse": "@buttonFalse",
            "typeVisual": "quickReply"
          },
          "outputs": {
            "default_id": "@default"
          }
        }
      }
    }
  },
  "mensajePreMenu": {
    "type": "messageRandom",
    "requerimientos": {
      "01inicial": {
        "nombreVariable": {
          "type": "string",
          "responsible": "DEV",
          "recommended": "var_case",
          "constraints": false,
          "name": "variable de control",
          "description": "nombre que recibe la variable de contador",
          "value": "qrd_mensaje_premenu"
        },
        "messages": {
          "type": "listDisplay",
          "responsible": "UX",
          "recommended": [
            {
              "content": "hola prueba",
              "type": "text"
            }
          ],
          "constraints": false,
          "name": "lista de que se pueden desplegar",
          "description": "mensajes que se depliegan al usuario",
          "value": [
            {
              "content": "¿Ahora en qué puedo ayudarte?",
              "type": "text"
            },
            {
              "content": "¿Cómo puedo ayudarte? ",
              "type": "text"
            },
            {
              "content": "¿Qué te gustaría hacer?",
              "type": "text"
            }
          ]
        },
        "defaultMessage": {
          "type": "dictDisplay",
          "responsible": "UX",
          "recommended": {
            "content": "hola default",
            "type": "text"
          },
          "constraints": false,
          "name": "mensaje por defecto",
          "description": "mensaje que se depliega al usuario si ocurre un error en la funcionalidad",
          "value": {
            "content": "no te entiendo",
            "type": "text"
          }
        }
      }
    },
    "outputs": {
      "01inicial": {
        "next": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "siguiente bloque",
          "value": "qrPersonalidad"
        },
        "default": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "salida default",
          "value": "qrPersonalidad"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "case",
          "description": "Funciona como un contador que permite limitar el número de intentos al realizar algun proceso",
          "compile": [
            "jsonVariable",
            "url"
          ],
          "parameters": {
            "jsonVariable": "{'variable':{ 'name_var':'{{nombreVariable}}','opc_type': 'Variable','var':0,'opc_data': 'Numerico'}}",
            "method": "GET",
            "typing_messages": 3,
            "url": "http://127.0.0.1:1111/random/{{nombreVariable}}/",
            "messages": "@messages",
            "default_message": "@defaultMessage",
            "nombreVariable": "@nombreVariable"
          },
          "outputs": {
            "default_id": "@default",
            "salidasCase": "@next"
          }
        }
      }
    }
  },
  "mensajesIntroduccion2": {
    "type": "listMessages",
    "requerimientos": {
      "01inicial": {
        "nombreVariable": {
          "type": "string",
          "responsible": "DEV",
          "recommended": "var_case",
          "constraints": false,
          "name": "variable de control",
          "description": "nombre que recibe la variable de contador",
          "value": "mensage_intro2"
        },
        "messages": {
          "type": "listDisplay",
          "responsible": "UX",
          "recommended": {
            "content": "hola prueba",
            "type": "text"
          },
          "constraints": false,
          "name": "lista de que se pueden desplegar",
          "description": "mensajes que se depliegan al usuario",
          "value": [
            {
              "content": "Soy un robot que funciona con un sistema automático llamado inteligencia artificial.",
              "type": "text"
            },
            {
              "content": "Cada vez que escribas intentare entenderte si algo se me dificulta siempre podre contactarte con un humano.",
              "type": "text"
            }
          ]
        },
        "defaultMessage": {
          "type": "dictDisplay",
          "responsible": "UX",
          "recommended": {
            "content": "no te entiendo",
            "type": "text"
          },
          "constraints": false,
          "name": "mensaje por defecto",
          "description": "mensaje que se depliega al usuario si ocurre un error en la funcionalidad",
          "value": {
            "content": "no logro comprenderte",
            "type": "text"
          }
        }
      }
    },
    "outputs": {
      "01inicial": {
        "next": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "siguiente bloque",
          "value": "pregunta"
        },
        "default": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "salida default",
          "value": "mensajesIntroduccion"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "case",
          "description": "Funciona como un contador que permite limitar el número de intentos al realizar algun proceso",
          "compile": [
            "jsonVariable",
            "url"
          ],
          "parameters": {
            "jsonVariable": "{'variable':{ 'name_var':'{{nombreVariable}}','opc_type': 'Variable','var':0,'opc_data': 'Numerico'}}",
            "method": "GET",
            "typing_messages": 3,
            "url": "http://127.0.0.1:1111/increase/{{nombreVariable}}/",
            "messages": "@messages",
            "default_message": "@defaultMessage",
            "nombreVariable": "@nombreVariable"
          },
          "outputs": {
            "default_id": "@default",
            "last": "restarVariable",
            "salidasCase": "inicial"
          }
        },
        "restarVariable": {
          "type": "internalProcess",
          "description": "bloque para realizar proceso interno del sistema",
          "compile": [
            "url"
          ],
          "parameters": {
            "method": "GET",
            "url": "http://127.0.0.1:1111/restar/{{nombreVariable}}",
            "nombreVariable": "@nombreVariable"
          },
          "outputs": {
            "next_true": "@next",
            "next_false": "@next"
          }
        }
      }
    }
  },
  "qrPersonalidad": {
    "type": "optionMenuFijo",
    "requerimientos": {
      "01inicial": {
        "jsonMenu": {
          "type": "jsonMenu",
          "responsible": "DEV",
          "recommended": false,
          "constraints": false,
          "name": "datos Menu",
          "description": "json que contiene los datos de llenado",
          "value": {
            "content": "Selecciona una opción",
            "buttons": [
              {
                "title": "¿Con quién estoy hablando?",
                "next_block": "mensajesIntroduccion"
              },
              {
                "title": "¿Qué edad tienes?",
                "next_block": "infoEdad"
              },
              {
                "title": "¿Cuál es tu color favorito?",
                "next_block": "infoColor"
              }
            ]
          }
        },
        "time": {
          "type": "select",
          "responsible": "UX",
          "recommended": 2,
          "constraints": [
            {
              "key": "uno",
              "value": 1
            },
            {
              "key": "dos",
              "value": 2
            },
            {
              "key": "tres",
              "value": 3
            }
          ],
          "name": "Tiempo de espera",
          "description": "tiempo de espera para mostrar el menú",
          "value": 3
        },
        "nombreVariable": {
          "type": "string",
          "responsible": "DEV",
          "recommended": "var_case",
          "constraints": false,
          "name": "variable de control",
          "description": "nombre que recibe la variable de contador",
          "value": "qr_personalidad"
        },
        "typeVisual": {
          "type": "select",
          "responsible": "UX",
          "recommended": false,
          "constraints": [
            {
              "key": "quickreply",
              "value": "quickReply"
            },
            {
              "key": "carrusel",
              "value": "slide"
            }
          ],
          "name": "tipo de visual",
          "description": "tipo de menu al que se va a desplegar",
          "value": "quickReply"
        }
      }
    },
    "outputs": {
      "01inicial": {
        "default": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "salida default de contador",
          "value": "NLPpersonalidad"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "@typeVisual",
          "description": "Funciona como un contador que permite limitar el número de intentos al realizar algun proceso",
          "compile": [
            "jsonVariable",
            "json"
          ],
          "parameters": {
            "handlebars": "@jsonMenu",
            "jsonVariable": "{'variable':{ 'name_var':'{{nombreVariable}}','opc_type': 'Variable','var':0,'opc_data': 'Numerico'}}",
            "typingtime": "@time",
            "nombreVariable": "@nombreVariable",
            "json": "{{#if handlebars.content}}{'content':'{{handlebars.content}}','buttons':[{{#each handlebars.buttons}}{'title':'{{title}}','next_block':'{{next_block}}'}{{#if @last}}{{else}},{{/if}}{{/each}}]}{{/if}}{{#if handlebars.elements}}[{{#each handlebars.elements}}{'title':'{{title}}','subtitle':'{{subtitle}}','image_url':'{{image_url}}','buttons':[{{#each buttons}}{'titlebutton':'{{titlebutton}}','typebutton':'{{typebutton}}','opc_nextid':'{{opc_nextid}}'}{{#if @last}}{{else}},{{/if}}{{/each}}]}{{#if @last}}{{else}},{{/if}}{{/each}}]{{/if}}",
            "content": "@content",
            "buttonTrue": "@buttonTrue",
            "buttonFalse": "@buttonFalse",
            "typeVisual": "@typeVisual"
          },
          "outputs": {
            "default_id": "@default"
          }
        }
      }
    }
  },
  "infoEdad": {
    "type": "informativo",
    "requerimientos": {
      "01inicial": {
        "content": {
          "type": "string",
          "responsible": "UX",
          "recommended": false,
          "contador": false,
          "name": "mensaje quickReply",
          "description": "mensaje que se le muesta al usuario en el quickReply",
          "value": "Mmmm yo tengo 21 años con 6 meses"
        },
        "time": {
          "type": "select",
          "responsible": "UX",
          "recommended": 2,
          "constraints": [
            {
              "key": "uno",
              "value": 1
            },
            {
              "key": "dos",
              "value": 2
            },
            {
              "key": "tres",
              "value": 3
            }
          ],
          "name": "Tiempo de espera",
          "description": "tiempo de espera para mostrar el menú",
          "value": 3
        },
        "contentType": {
          "type": "select",
          "responsible": "UX",
          "recommended": 2,
          "constraints": [
            {
              "key": "imagen",
              "value": "image"
            },
            {
              "key": "texto",
              "value": "text"
            }
          ],
          "name": "tipo de contenido",
          "description": "formato en que se despliega el mensaje",
          "value": "text"
        }
      }
    },
    "outputs": {
      "01inicial": {
        "next": {
          "type": "output",
          "responsible": "UX",
          "constraints": false,
          "recommended": false,
          "name": "siguiente",
          "value": "mensajePreMenu"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "informativo",
          "description": "bloque que despliega información",
          "name": "",
          "parameters": {
            "contenido": "@content",
            "contenttype": "@contentType",
            "typingtime": "@time"
          },
          "outputs": {
            "next_id": "@next"
          }
        }
      }
    }
  },
  "infoColor": {
    "type": "informativo",
    "requerimientos": {
      "01inicial": {
        "content": {
          "type": "string",
          "responsible": "UX",
          "recommended": false,
          "contador": false,
          "name": "mensaje quickReply",
          "description": "mensaje que se le muesta al usuario en el quickReply",
          "value": "Mi color favorito es el azul porque me recuerda el cielo y el mar."
        },
        "time": {
          "type": "select",
          "responsible": "UX",
          "recommended": 2,
          "constraints": [
            {
              "key": "uno",
              "value": 1
            },
            {
              "key": "dos",
              "value": 2
            },
            {
              "key": "tres",
              "value": 3
            }
          ],
          "name": "Tiempo de espera",
          "description": "tiempo de espera para mostrar el menú",
          "value": 3
        },
        "contentType": {
          "type": "select",
          "responsible": "UX",
          "recommended": 2,
          "constraints": [
            {
              "key": "imagen",
              "value": "image"
            },
            {
              "key": "texto",
              "value": "text"
            }
          ],
          "name": "tipo de contenido",
          "description": "formato en que se despliega el mensaje",
          "value": "text"
        }
      }
    },
    "outputs": {
      "01inicial": {
        "next": {
          "type": "output",
          "responsible": "UX",
          "constraints": false,
          "recommended": false,
          "name": "siguiente",
          "value": "mensajePreMenu"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "informativo",
          "description": "bloque que despliega información",
          "name": "",
          "parameters": {
            "contenido": "@content",
            "contenttype": "@contentType",
            "typingtime": "@time"
          },
          "outputs": {
            "next_id": "@next"
          }
        }
      }
    }
  },
  "pregunta": {
    "type": "input",
    "requerimientos": {
      "01inicial": {
        "content": {
          "type": "string",
          "responsible": "UX",
          "recommended": false,
          "contador": false,
          "name": "mensaje quickReply",
          "description": "mensaje que se le muesta al usuario en el quickReply",
          "value": "¿Qué deseas hacer?"
        },
        "nombreVariable": {
          "type": "string",
          "responsible": "DEV",
          "recommended": false,
          "constraints": false,
          "name": "variable de control",
          "description": "nombre que recibe la variable para capturar información",
          "value": "var_pregunta"
        }
      }
    },
    "outputs": {
      "01inicial": {
        "next": {
          "type": "output",
          "responsible": "UX",
          "constraints": false,
          "recommended": false,
          "name": "siguiente",
          "value": "NLPpersonalidad"
        },
        "default": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "salida default de nlp",
          "value": "NLPpersonalidad"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "input",
          "description": "bloque que captura información y hace validacion con regex",
          "compile": [
            "jsonVariable"
          ],
          "name": "",
          "parameters": {
            "contenido": "@content",
            "contenttype": "text",
            "typingtime": 1,
            "validacion": ".*",
            "jsonVariable": "{'variable':{ 'name_var':'{{nombreVariable}}','opc_type': 'Variable','var':0,'opc_data': 'String'}}",
            "nombreVariable": "@nombreVariable"
          },
          "outputs": {
            "next_id": "@next",
            "default_id": "@default"
          }
        }
      }
    }
  },
  "NLPpersonalidad": {
    "type": "nlp",
    "requerimientos": {
      "01inicial": {
        "jsonNLP": {
          "type": "string",
          "responsible": "DEV",
          "recommended": false,
          "contador": false,
          "name": "json de NLP",
          "description": "json con condiciones de salto por NLP",
          "value": {
            "intentions": [],
            "entities": [],
            "conditionals": [
              {
                "condition": "#identidad",
                "next": "mensajesIntroduccion_01inicial_inicial"
              },
              {
                "condition": "#edad",
                "next": "mensajePreMenu_01inicial_inicial"
              },
              {
                "condition": "#color",
                "next": "mensajePreMenu_01inicial_inicial"
              }
            ]
          }
        }
      }
    },
    "outputs": {
      "01inicial": {
        "default": {
          "type": "output",
          "responsible": "UX",
          "recommended": false,
          "constraints": false,
          "name": "salida default de nlp",
          "value": "mensajesIntroduccion"
        }
      }
    },
    "blocks": {
      "01inicial": {
        "inicial": {
          "type": "nlp",
          "description": "bloque de procesamiento de lenguaje  natural",
          "name": "",
          "parameters": {
            "default_message": "Lo siento pero no logro comprender lo que me pides",
            "json_nlp": "@jsonNLP"
          },
          "outputs": {
            "default_id": "@default"
          }
        }
      }
    }
  }
}